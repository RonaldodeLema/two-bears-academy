@model EcommerceCore.ViewModel.Product.ProductViewModel
@{
var info = System.Globalization.CultureInfo.GetCultureInfo("vi-VN");
}
<div class="loader-wrapper">
      <div class="theme-loader">    
        <div class="loader-p"></div>
      </div>
    </div>
    <!-- Loader ends-->
    <!-- page-wrapper Start-->
    <div class="page-wrapper" id="pageWrapper">
      <!-- Page Header Start-->
      <div class="page-main-header">
        <div class="main-header-right row m-0">
          <div class="left-menu-header col">
            <ul>
              <li>
                <form class="form-inline search-form">
                  <div class="search-bg"><i class="fa fa-search"></i>
                    <input class="form-control-plaintext" placeholder="Search here.....">
                  </div>
                </form><span class="d-sm-none mobile-search search-bg"><i class="fa fa-search"></i></span>
              </li>
            </ul>
          </div>
          <div class="nav-right col pull-right right-menu p-0">
            <ul class="nav-menus">
              <li><a class="text-dark" href="#!" onclick="javascript:toggleFullScreen()"><i data-feather="maximize"></i></a></li>
              <li class="onhover-dropdown">
                <div class="bookmark-box"><i data-feather="star"></i></div>
              </li>
              <li class="onhover-dropdown">
                <div class="notification-box"><i data-feather="bell"></i><span class="dot-animated"></span></div>
                <ul class="notification-dropdown onhover-show-div">
                  <li>
                    <p class="f-w-700 mb-0">You have 3 Notifications<span class="pull-right badge badge-primary badge-pill">4</span></p>
                  </li>
                  <li class="noti-primary">
                    <div class="media"><span class="notification-bg bg-light-primary"><i data-feather="activity"> </i></span>
                      <div class="media-body">
                        <p>Delivery processing </p><span>10 minutes ago</span>
                      </div>
                    </div>
                  </li>
                  <li class="noti-secondary">
                    <div class="media"><span class="notification-bg bg-light-secondary"><i data-feather="check-circle"> </i></span>
                      <div class="media-body">
                        <p>Order Complete</p><span>1 hour ago</span>
                      </div>
                    </div>
                  </li>
                  <li class="noti-success">
                    <div class="media"><span class="notification-bg bg-light-success"><i data-feather="file-text"> </i></span>
                      <div class="media-body">
                        <p>Tickets Generated</p><span>3 hour ago</span>
                      </div>
                    </div>
                  </li>
                  <li class="noti-danger">
                    <div class="media"><span class="notification-bg bg-light-danger"><i data-feather="user-check"> </i></span>
                      <div class="media-body">
                        <p>Delivery Complete</p><span>6 hour ago</span>
                      </div>
                    </div>
                  </li>
                </ul>
              </li>
              <li>
                <div class="mode"><i class="fa fa-moon-o"></i></div>
              </li>
              <li class="onhover-dropdown"><i data-feather="message-square"></i>
                <ul class="chat-dropdown onhover-show-div">
                  <li>
                    <div class="media"><img class="img-fluid rounded-circle me-3" src="../assets/images/user/4.jpg" alt="">
                      <div class="media-body"><span>Ain Chavez</span>
                        <p class="f-12 light-font">Lorem Ipsum is simply dummy...</p>
                      </div>
                      <p class="f-12">32 mins ago</p>
                    </div>
                  </li>
                  <li>
                    <div class="media"><img class="img-fluid rounded-circle me-3" src="../assets/images/user/1.jpg" alt="">
                      <div class="media-body"><span>Erica Hughes</span>
                        <p class="f-12 light-font">Lorem Ipsum is simply dummy...</p>
                      </div>
                      <p class="f-12">58 mins ago</p>
                    </div>
                  </li>
                  <li>
                    <div class="media"><img class="img-fluid rounded-circle me-3" src="../assets/images/user/2.jpg" alt="">
                      <div class="media-body"><span>Kori Thomas</span>
                        <p class="f-12 light-font">Lorem Ipsum is simply dummy...</p>
                      </div>
                      <p class="f-12">1 hr ago</p>
                    </div>
                  </li>
                  <li class="text-center"> <a class="f-w-700" href="javascript:void(0)">See All     </a></li>
                </ul>
              </li>
              <li class="onhover-dropdown p-0">
                <button class="btn btn-primary-light" type="button"><a href="login_two.html"><i data-feather="log-out"></i>Log out</a></button>
              </li>
            </ul>
          </div>
          <div class="d-lg-none mobile-toggle pull-right w-auto"><i data-feather="more-horizontal"></i></div>
        </div>
      </div>
      <!-- Page Header Ends                              -->
      <!-- Page Body Start-->
      <div class="page-body" style="margin-top: 100px; margin-left:50px">
        <!-- Page Sidebar Start-->
        
        <!-- Page Sidebar Ends-->
        <div class="page-body">
          <div class="container-fluid">
            <div class="page-header">
              <div class="row">
                <div class="col-sm-6">
                  <h3>Product page</h3>
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="@Url.Action("Index", "HomeEndUser")">Home</a></li>
                    <li class="breadcrumb-item">Ecommerce</li>
                    <li class="breadcrumb-item active">product page</li>
                  </ol>
                </div>
                <div class="col-sm-6">
                  <!-- Bookmark Start-->
                  <div class="bookmark">
                  </div>
                  <!-- Bookmark Ends-->
                </div>
              </div>
            </div>
          </div>
          <!-- Container-fluid starts-->
          <div class="container-fluid">
            <div>
              <div class="row product-page-main p-0">
                <div class="col-xl-5 col-md-6 box-col-12 xl-50">
                  <div class="card">
                    <div class="card-body">
                      <div class="row">
                        <div class="col-xl-9 product-main">
                          <div class="pro-slide-single">
                            @foreach (var image in Model.ListProductImage)
                            {
                            <div><img class="img-fluid" src="@image.Url" alt=""></div>
                            }
                          </div>
                        </div>
                        <div class="col-xl-3 product-thumbnail">
                          <div class="pro-slide-right">

                            @foreach (var image in Model.ListProductImage)
                            {
                             <div>
                              <div class="slide-box"><img src="@image.Url" alt=""></div>
                            </div>
                            }

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-5 box-col-6 proorder-xl-3 xl-100">
                  <div class="card">
                    <div class="card-body">
                      <div class="pro-group pt-0 border-0">
                        <div class="product-page-details mt-0">
                          <h3>@Model.Name</h3>
                          <div class="pro-review">
                            <div class="d-flex">
                              <select id="u-rating-fontawesome" name="rating" class="ratingStar" autocomplete="off">
                                <option class="ratingStarValue" value="1">1</option>
                                <option class="ratingStarValue" value="2">2</option>
                                <option class="ratingStarValue" value="3">3</option>
                                <option class="ratingStarValue" value="4">4</option>
                                <option class="ratingStarValue" value="5">5</option>
                              </select><span>(@Model.ProductRatingCount review)</span>
                            </div>
                          </div>
                        </div>
                        <div class="product-price">@(String.Format(info, "{0:c}", Model.SellPrice))
                          <del>@(String.Format(info, "{0:c}", Model.BasePrice)) </del>
                        </div>
                      </div>
                      <div class="pro-group">
                        <p>@Model.Description</p>
                      </div>
                      <div class="pro-group">
                        <div class="row">
                          <div class="col-md-6">
                            <table>
                              <tbody>
                                <tr>
                                  <td> <b>Availability &nbsp;: &nbsp;</b></td>
                                  <td class="txt-success">@( Model.Quantity <= 0 ? "Out stock" : "In stock" )</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          <div class="col-md-6">
                            <table>
                              <tbody>
                                <tr>
                                  <td> <b>Seller &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;: &nbsp;&nbsp;&nbsp;</b></td>
                                  <td>Ecommerce</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                      <div class="pro-group">
                        <div class="row">
                          <div class="col-md-4 xl-50">
                            <h6 class="product-title">share it</h6>
                          </div>
                          <div class="col-md-7 xl-50">
                            <div class="product-icon">
                              <ul class="product-social">
                                <li class="d-inline-block"><a href="javascript:void(0)"><i class="fa fa-facebook"></i></a></li>
                                <li class="d-inline-block"><a href="javascript:void(0)"><i class="fa fa-google-plus"></i></a></li>
                                <li class="d-inline-block"><a href="javascript:void(0)"><i class="fa fa-twitter"></i></a></li>
                                <li class="d-inline-block"><a href="javascript:void(0)"><i class="fa fa-instagram"></i></a></li>
                                <li class="d-inline-block"><a href="javascript:void(0)"><i class="fa fa-rss"></i></a></li>
                              </ul>
                              <form class="d-inline-block f-right"></form>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="pro-group pb-0">
                        <div class="pro-shop">
                            <a class="btn btn-primary m-r-10" href="@Url.Action("CreateCart", "Cart", new {productId = Model.Id})">
                            <i class="fa fa-shopping-basket me-2"></i>Add To Cart</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-2 col-md-6 box-col-6 xl-50 proorder-lg-1">
                  <div class="card">
                    <div class="card-body">
                      <div class="collection-filter-block">
                        <ul class="pro-services">
                          <li>
                            <div class="media"><i data-feather="truck"></i>
                              <div class="media-body">
                                <h5>Free Shipping</h5>
                                <p>Free Shipping World Wide</p>
                              </div>
                            </div>
                          </li>
                          <li>
                            <div class="media"><i data-feather="clock"></i>
                              <div class="media-body">
                                <h5>24 X 7 Service</h5>
                                <p>Online Service For New Customer</p>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
            <div class="row product-page-main">
                <div class="col-sm-12">
                  <ul class="nav nav-tabs border-tab mb-0" id="top-tab" role="tablist">
                    <li class="nav-item"><a class="nav-link active" id="top-home-tab" data-bs-toggle="tab" href="#top-home" role="tab" aria-controls="top-home" aria-selected="true">Description</a>
                      <div class="material-border"></div>
                    </li>
                    <li class="nav-item"><a class="nav-link" id="profile-top-tab" data-bs-toggle="tab" href="#top-profile" role="tab" aria-controls="top-profile" aria-selected="false">Feedbacks</a>
                      <div class="material-border"></div>
                    </li>
                  </ul>
                  <div class="tab-content" id="top-tabContent">
                    <div class="tab-pane fade active show" id="top-home" role="tabpanel" aria-labelledby="top-home-tab">
                      <p class="mb-0 m-t-20">@Model.Description</p>
                    </div>
                    <div class="tab-pane fade" id="top-profile" role="tabpanel" aria-labelledby="profile-top-tab">
                      
                        @if( Model.ListProductFeedback.Count() > 0 ||  Model.ListProductFeedback != null)
                        {
                            foreach (var productFeedback in Model.ListProductFeedback)
                            {
                                    <div class="@SystemStyleCard.Card">
                                    <div class="@SystemStyleCard.CardBody">
                                        <div class="@SystemStyleForm.ThemeForm">
                                            <div class="mb-3">
                                            <label>@( productFeedback.User == null ? "Trống" : productFeedback.User.Name )</label>
                                           <p>@productFeedback.Content</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            } 
                        }
                   @if ( Model.IsBought )
                    {
                       <partial name="_ProductFeedback" model="@Model.ProductFeedback"  />
                    }
                    else
                    {
                        //ko lam j ca
                    }
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

@section Scripts {
    <script>
      //Rating star script
      $('#u-rating-fontawesome').barrating({
            theme: 'fontawesome-stars',
            readonly: @( Model.IsBought == false || Model.UserRatingCount != 0 ? "true" : "false"),
            showSelectedRating: false,
            initialRating: @Model.UserRatingCount,
            onSelect: function(value, text) {
            $.ajax({
                data: {id : @Model.Id, content: value},
                type: "POST",
                url: '@Url.Action("CreateProductRatingFeedback")',
                cache: false,
                success: function (resp) {
                },
                error: function (error) {
                    alert("Lỗi")
                },
                complete: function () {
                    window.location.reload();
                }
            });
            },
        });
    </script>
}
